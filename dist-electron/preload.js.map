{"version":3,"file":"preload.js","sources":["../electron/preload.ts"],"sourcesContent":["import { ipcRenderer, contextBridge } from 'electron'\r\n\r\n// Expose protected methods that allow the renderer process to use\r\n// the ipcRenderer without exposing the entire object\r\ncontextBridge.exposeInMainWorld('electronAPI', {\r\n  // Settings\r\n  settings: {\r\n    get: () => ipcRenderer.invoke('settings:get'),\r\n    set: (key: string, value: any) => ipcRenderer.invoke('settings:set', key, value),\r\n    selectDownloadFolder: () => ipcRenderer.invoke('settings:selectDownloadFolder'),\r\n    selectMemoryBankFolder: () => ipcRenderer.invoke('settings:selectMemoryBankFolder')\r\n  },\r\n\r\n  // Browser Automation\r\n  browser: {\r\n    navigate: (url: string) => ipcRenderer.invoke('browser:navigate', url),\r\n    click: (selector: string) => ipcRenderer.invoke('browser:click', selector),\r\n    type: (selector: string, text: string) => ipcRenderer.invoke('browser:type', selector, text),\r\n    getText: (selector?: string) => ipcRenderer.invoke('browser:getText', selector),\r\n    getHtml: () => ipcRenderer.invoke('browser:getHtml'),\r\n    screenshot: (options?: { path?: string; fullPage?: boolean }) => ipcRenderer.invoke('browser:screenshot', options),\r\n    scroll: (direction: 'up' | 'down' | 'top' | 'bottom') => ipcRenderer.invoke('browser:scroll', direction),\r\n    findElements: (selector: string) => ipcRenderer.invoke('browser:findElements', selector),\r\n    evaluate: (script: string) => ipcRenderer.invoke('browser:evaluate', script),\r\n    close: () => ipcRenderer.invoke('browser:close'),\r\n    reopen: () => ipcRenderer.invoke('browser:reopen')\r\n  },\r\n\r\n  // Memory Bank\r\n  memory: {\r\n    add: (type: 'conversation' | 'search', content: string, metadata?: Record<string, any>) => \r\n      ipcRenderer.invoke('memory:add', type, content, metadata),\r\n    search: (query: string, limit?: number) => ipcRenderer.invoke('memory:search', query, limit),\r\n    getRecent: (limit?: number) => ipcRenderer.invoke('memory:getRecent', limit),\r\n    delete: (id: string) => ipcRenderer.invoke('memory:delete', id),\r\n    clear: () => ipcRenderer.invoke('memory:clear'),\r\n    getStats: () => ipcRenderer.invoke('memory:getStats')\r\n  },\r\n\r\n  // Shell\r\n  shell: {\r\n    openExternal: (url: string) => ipcRenderer.invoke('shell:openExternal', url)\r\n  },\r\n\r\n  // Download\r\n  download: {\r\n    getFolder: () => ipcRenderer.invoke('download:getFolder')\r\n  }\r\n})\r\n\r\n// Type definitions for the exposed API\r\ndeclare global {\r\n  interface Window {\r\n    electronAPI: {\r\n      settings: {\r\n        get: () => Promise<any>\r\n        set: (key: string, value: any) => Promise<boolean>\r\n        selectDownloadFolder: () => Promise<string | null>\r\n        selectMemoryBankFolder: () => Promise<string | null>\r\n      }\r\n      browser: {\r\n        navigate: (url: string) => Promise<void>\r\n        click: (selector: string) => Promise<void>\r\n        type: (selector: string, text: string) => Promise<void>\r\n        getText: (selector?: string) => Promise<string>\r\n        getHtml: () => Promise<string>\r\n        screenshot: (options?: { path?: string; fullPage?: boolean }) => Promise<string>\r\n        scroll: (direction: 'up' | 'down' | 'top' | 'bottom') => Promise<void>\r\n        findElements: (selector: string) => Promise<Array<{ tag: string; text: string; attributes: Record<string, string> }>>\r\n        evaluate: (script: string) => Promise<any>\r\n        close: () => Promise<boolean>\r\n        reopen: () => Promise<boolean>\r\n      }\r\n      memory: {\r\n        add: (type: 'conversation' | 'search', content: string, metadata?: Record<string, any>) => Promise<string | null>\r\n        search: (query: string, limit?: number) => Promise<Array<{ id: string; content: string; score: number; metadata: any }>>\r\n        getRecent: (limit?: number) => Promise<Array<{ id: string; content: string; timestamp: number; type: string }>>\r\n        delete: (id: string) => Promise<boolean>\r\n        clear: () => Promise<boolean>\r\n        getStats: () => Promise<{ total: number; conversations: number; searches: number }>\r\n      }\r\n      shell: {\r\n        openExternal: (url: string) => Promise<void>\r\n      }\r\n      download: {\r\n        getFolder: () => Promise<string>\r\n      }\r\n    }\r\n  }\r\n}"],"names":[],"mappings":";AAIA,cAAc,kBAAkB,eAAe;AAAA;AAAA,EAE7C,UAAU;AAAA,IACR,KAAK,MAAM,YAAY,OAAO,cAAc;AAAA,IAC5C,KAAK,CAAC,KAAa,UAAe,YAAY,OAAO,gBAAgB,KAAK,KAAK;AAAA,IAC/E,sBAAsB,MAAM,YAAY,OAAO,+BAA+B;AAAA,IAC9E,wBAAwB,MAAM,YAAY,OAAO,iCAAiC;AAAA,EAAA;AAAA;AAAA,EAIpF,SAAS;AAAA,IACP,UAAU,CAAC,QAAgB,YAAY,OAAO,oBAAoB,GAAG;AAAA,IACrE,OAAO,CAAC,aAAqB,YAAY,OAAO,iBAAiB,QAAQ;AAAA,IACzE,MAAM,CAAC,UAAkB,SAAiB,YAAY,OAAO,gBAAgB,UAAU,IAAI;AAAA,IAC3F,SAAS,CAAC,aAAsB,YAAY,OAAO,mBAAmB,QAAQ;AAAA,IAC9E,SAAS,MAAM,YAAY,OAAO,iBAAiB;AAAA,IACnD,YAAY,CAAC,YAAoD,YAAY,OAAO,sBAAsB,OAAO;AAAA,IACjH,QAAQ,CAAC,cAAgD,YAAY,OAAO,kBAAkB,SAAS;AAAA,IACvG,cAAc,CAAC,aAAqB,YAAY,OAAO,wBAAwB,QAAQ;AAAA,IACvF,UAAU,CAAC,WAAmB,YAAY,OAAO,oBAAoB,MAAM;AAAA,IAC3E,OAAO,MAAM,YAAY,OAAO,eAAe;AAAA,IAC/C,QAAQ,MAAM,YAAY,OAAO,gBAAgB;AAAA,EAAA;AAAA;AAAA,EAInD,QAAQ;AAAA,IACN,KAAK,CAAC,MAAiC,SAAiB,aACtD,YAAY,OAAO,cAAc,MAAM,SAAS,QAAQ;AAAA,IAC1D,QAAQ,CAAC,OAAe,UAAmB,YAAY,OAAO,iBAAiB,OAAO,KAAK;AAAA,IAC3F,WAAW,CAAC,UAAmB,YAAY,OAAO,oBAAoB,KAAK;AAAA,IAC3E,QAAQ,CAAC,OAAe,YAAY,OAAO,iBAAiB,EAAE;AAAA,IAC9D,OAAO,MAAM,YAAY,OAAO,cAAc;AAAA,IAC9C,UAAU,MAAM,YAAY,OAAO,iBAAiB;AAAA,EAAA;AAAA;AAAA,EAItD,OAAO;AAAA,IACL,cAAc,CAAC,QAAgB,YAAY,OAAO,sBAAsB,GAAG;AAAA,EAAA;AAAA;AAAA,EAI7E,UAAU;AAAA,IACR,WAAW,MAAM,YAAY,OAAO,oBAAoB;AAAA,EAAA;AAE5D,CAAC;"}